{% if Identifier.nullFlavor == null -%}
    {% if Identifier.extension -%}
        {% assign value = Identifier.extension -%}
        {% assign pattern_match = Identifier.root | match: "^([0-2])((\.0)|(\.[1-9][0-9]*))*$" | size -%}
        {% if pattern_match == 1 -%}
            {%- capture system -%}
                {% include 'ValueSet/SystemReference' code: Identifier.root -%}
            {%- endcapture -%}
            {% assign system = system | strip -%}
        {% else -%}
            {% assign system = Identifier.root | prepend_id -%}
        {% endif -%}
    {% elsif Identifier.root -%}
        {% assign value = Identifier.root | prepend_id -%}
        {% assign system = "urn:ietf:rfc:3986" -%}
    {% endif -%}

    "system": "{{ system }}",
    "value": "{{ value }}",
    "assigner": {
        "display": "{{ Identifier.assigningAuthorityName }}"
    }
{% endif -%}